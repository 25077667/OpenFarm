<% content_for (:start_js) do %>
  <%= javascript_include_tag "home" %>
  <%= javascript_include_tag "search" %>
<% end %>

<div class="hero">
    <div class="video-background">
        <video autoplay loop poster="<%= image_path 'home_video_first_frame.jpeg' %>">
            <source src="<%= asset_path 'home_video.webm' %>" type="video/webm">
            <source src="<%= asset_path 'home_video.mp4' %>" type="video/mp4">
        </video>
    </div>
    <div class="the-blackness"></div>
    <div class="row row-table row-full-height">
        <div class="small-12 small-centered column-middle columns">
            <img class="logo" src="<%= image_path 'openfarm_logo.png' %>" width="420px">
            <h2 class="text-center"><%=t 'home.hero_header' %></h2>
            <a href="#how-it-works"><button class="how-it-works-button">
                <%= t 'home.how_it_works' %>
            </button></a>
        </div>
        <div class="search text-center">
            <form action="<%= crop_search_via_get_path %>" method="get" >
            <!-- ^NOT A MISTAKE!! Avoiding rails helpers for cleaner URLs and Ganalytics. -->
                <div class="search-bar-container">
                    <div class="search-bar" ng-app="searchApp" ng-controller="searchCtrl">
                        <div class="search-input-container">
                            <input typeahead-min-length="1" autocomplete="off" class="search-input ng-pristine ng-valid ng-valid-maxlength ng-touched" id="q" maxlength="120" name="q" ng-change="search()" ng-model="query" placeholder="<%= t('home.placeholder') %>" type="text" typeahead-wait-ms="200" typeahead="crop.name for crop in crops">
                        </div>
                        <div class="search-button-container">
                            <input class="search-button button no-shadow postfix" data-disable-with="Searching..." type="submit" value="<%= t('home.search') %>">
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="how-it-works" id="how-it-works">
        <div class="row">
            <a href="#"><i class="fa fa-times exit"></i></a>
            <div class="small-12 columns steps">
                <div class="small-12 medium-4 columns">
                    <div class="step step-circle step-circle-1">1</div>
                        <%= t 'home.step_1' %>
                    <div class="step-icon step-1"></div>
                </div>
                <div class="small-12 medium-4 columns">
                    <div class="step step-circle step-circle-2">2</div>
                        <%= t 'home.step_2' %>
                    <div class="step-icon step-2"></div>
                </div>
                <div class="small-12 medium-4 columns">
                    <div class="step step-circle step-circle-3">3</div>
                        <%= t 'home.step_3' %>
                    <div class="step-icon step-3"></div>
                </div>
            </div>
            <h2 class="center guide-description">
                Growing Guides show you how to care for your Crop during all of its Life Stages. Each Guide is based on specific environmental conditions and growing practices, and ranked for compatibility with you and your gardens.
            </h2>
            <ul class="life-stage-icons">
                <!-- Why don't these icons show up? -->
                <li class="Preparation"></li>
                <li class="Sow"></li>
                <li class="Germination"></li>
                <li class="Seedling"></li>
                <li class="Juvenile"></li>
                <li class="Adult"></li>
                <li class="Fruit"></li>
                <li class="Flowering"></li>
            </ul>
        </div>
    </div>
</div>

<div class="featured-crops">
    <div id="community-favorites" class="explore-community-favorites text-center">
        <h2><%= t('home.community_favorites') %></h2>
    </div>
    <%= render partial: 'featured_crops_grid', object:@featured_crops, locals:{rows:3, cols:3} %>
</div>
<% content_for(:end_js) do %>
    <%= javascript_include_tag "home" %>
    <%= javascript_include_tag "search" %>
<% end %>
